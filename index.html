<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/konva@7.2.3/konva.min.js"></script>
    <script src="https://unpkg.com/gifler@0.1.0/gifler.min.js"></script>
    <meta charset="utf-8" />
    <canvas
      id="icanvas"
      width="60"
      height="180"
      style="background: url('./mario.jpg')"
    ></canvas>

    <script type="application/javascript"></script>
  </head>
  <body>
    <script>
      var canvas = document.getElementById("icanvas");
      var ctx = canvas.getContext("2d");
      var marioX = -75;
      var cloudsX = -330;

      var clouds = new Image();
      clouds.src = "clouds.png";

      function animateMario(ctx, frame) {
        canvas.width = window.innerWidth;
        canvas.height = 682;
        
        ctx.clearRect(0, 0, canvas.width, canvas.height); // clear canvas
        ctx.drawImage(frame.buffer, marioX, 490, 68, 80); // draw image at current position
        ctx.drawImage(clouds, cloudsX, -37, 550, 360); // draw image at current position

        marioX += 15;
        cloudsX += 0.4;
        if (marioX > window.innerWidth) {
          marioX = -75;
        }

        if (cloudsX > window.innerWidth) {
          cloudsX = -500;
        }
      }

      gifler(
        "https://media.tenor.com/images/3587a1558eebed4b540d34f8bec6a79c/tenor.gif"
      ).frames(canvas, animateMario, true);
    </script>
  </body>
</html>
